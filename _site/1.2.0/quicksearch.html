<html>
<head>
</head>
<body style="background: transparent;">
    <script src="scripts/docstrap.lib.js"></script>
    <script src="scripts/lunr.min.js"></script>
    <script src="scripts/fulltext-search.js"></script>

    <script type="text/x-docstrap-searchdb">
    {"classes.list.html":{"id":"classes.list.html","title":"Classes","body":" Documentation Namespaces NGSI Classes NGSI.AlreadyExistsErrorNGSI.BadRequestErrorNGSI.ConnectionNGSI.ConnectionErrorNGSI.InvalidRequestErrorNGSI.InvalidResponseErrorNGSI.NotFoundErrorNGSI.TooManyResultsError Classes Classes AlreadyExistsError Exception raised when creating an entity that already exists. BadRequestError Exception raised when creating an entity that already exists. Connection A context broker connection. ConnectionError Exception raised for connection problems. InvalidRequestError Exception raised when the context broker server reject the request. InvalidResponseError Exception raised when detecting invalid responses from the server. NotFoundError Exception raised when requesting a missing resource TooManyResultsError Exception raised when making an ambiguous query Namespaces NGSI × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-09-10T17:52:44+02:00 . "},"namespaces.list.html":{"id":"namespaces.list.html","title":"Namespaces","body":" Documentation Namespaces NGSI Classes NGSI.AlreadyExistsErrorNGSI.BadRequestErrorNGSI.ConnectionNGSI.ConnectionErrorNGSI.InvalidRequestErrorNGSI.InvalidResponseErrorNGSI.NotFoundErrorNGSI.TooManyResultsError Namespaces Classes AlreadyExistsError Exception raised when creating an entity that already exists. BadRequestError Exception raised when creating an entity that already exists. Connection A context broker connection. ConnectionError Exception raised for connection problems. InvalidRequestError Exception raised when the context broker server reject the request. InvalidResponseError Exception raised when detecting invalid responses from the server. NotFoundError Exception raised when requesting a missing resource TooManyResultsError Exception raised when making an ambiguous query Namespaces NGSI × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-09-10T17:52:44+02:00 . "},"index.html":{"id":"index.html","title":"Index","body":" Documentation Namespaces NGSI Classes NGSI.AlreadyExistsErrorNGSI.BadRequestErrorNGSI.ConnectionNGSI.ConnectionErrorNGSI.InvalidRequestErrorNGSI.InvalidResponseErrorNGSI.NotFoundErrorNGSI.TooManyResultsError ngsijs Ngsijs is the JavaScript library used by WireCloud for adding FIWARE NGSI capabilities to widgets and operators. However, this library has also been designed to be used in other environments as normal web pages and clients/servers running on Node.js. This library has been developed following the FIWARE NGSI v1 and NGSI v2 specifications and has been tested to work against version 0.26.0+ of the Orion Context Broker. Reference documentation of the API is available at http://conwetlab.github.io/ngsijs/stable/NGSI.html. Using ngsijs from normal web pages Note: Support for Cross-Origin Resource Sharing (CORS) has been added on orion 1.10.0. This support must be enabled to access the context broker from a web page in a different domain than the context broker. CORS support can also be enabled by accessing to the context broker server using some proxies, like cors-anywhere or the FIWARE's pep proxy. You can access any context broker server (without requiring CORS support and regardless of the context broker version) if the context broker is accessible throught the same domain as the web page. How to create such configuration is out of the scope of this documentation. Just include a &lt;script&gt; element linking to the NGSI.min.js file: &lt;script type=&quot;text/javascript&quot; src=&quot;url_to_NGSI.js&quot;&gt;&lt;/script&gt;Once added the &lt;script&gt; element, you will be able to use all the features provided by the ngsijs library (except receiving notifications): var connection = new NGSI.Connection(&quot;http://orion.example.com:1026&quot;); connection.v2.listEntities().then((response) =&gt; { response.results.forEach((entity) =&gt; { console.log(entity.id); }); });This example will display the id of the first 20 entities. See the documentation of the listEntities method for more info. To be able to receive notifications inside a web browser the library requires the use of a ngsi-proxy server. You can use your own instance or the ngsi-proxy instance available at https://ngsiproxy.lab.fiware.org. var connection = new NGSI.Connection(&quot;http://orion.example.com:1026&quot;, { ngsi_proxy_url: &quot;https://ngsiproxy.lab.fiware.org&quot; });Using ngsijs from Node.js$ npm install ngsijsAfter installing the ngsijs node module, you will be able to use the API as usual: var NGSI = require('ngsijs'); var connection = new NGSI.Connection(&quot;http://orion.example.com:1026&quot;); connection.v2.listEntities().then((response) =&gt; { response.results.forEach((entity) =&gt; { console.log(entity.id); }); }); Note: Node.js doesn't require the usage of a ngsi-proxy as you can create an HTTP endpoint easily (e.g. using express). Anyway, you can use it if you want, you only have to take into account that is better to directly provide the HTTP endpoint to reduce the overhead. Using ngsijs from WireCloud widgets/operatorsWireCloud already provides some components (widgets, operators and mashups) allowing NGSI connectivity. E.g.: NGSI Source operator NGSI Browser widget NGSI datamodel 2 PoI operator Anyway, WireCloud uses ngsijs as the binding for connecting to context brokers. If you need to create a new specific component you can take a look into the &quot;3.2.1. Using Orion Context Broker&quot; tutorial available at the FIWARE Academy. × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-09-10T17:52:44+02:00 . "},"NGSI.html":{"id":"NGSI.html","title":"Namespace: NGSI","body":" Documentation Namespaces NGSI Classes NGSI.AlreadyExistsErrorNGSI.BadRequestErrorNGSI.ConnectionNGSI.ConnectionErrorNGSI.InvalidRequestErrorNGSI.InvalidResponseErrorNGSI.NotFoundErrorNGSI.TooManyResultsError Namespace: NGSI Classes AlreadyExistsError Exception raised when creating an entity that already exists. BadRequestError Exception raised when creating an entity that already exists. Connection A context broker connection. ConnectionError Exception raised for connection problems. InvalidRequestError Exception raised when the context broker server reject the request. InvalidResponseError Exception raised when detecting invalid responses from the server. NotFoundError Exception raised when requesting a missing resource TooManyResultsError Exception raised when making an ambiguous query × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-09-10T17:52:44+02:00 . "},"NGSI.AlreadyExistsError.html":{"id":"NGSI.AlreadyExistsError.html","title":"Class: AlreadyExistsError","body":" Documentation Namespaces NGSI Classes NGSI.AlreadyExistsErrorNGSI.BadRequestErrorNGSI.ConnectionNGSI.ConnectionErrorNGSI.InvalidRequestErrorNGSI.InvalidResponseErrorNGSI.NotFoundErrorNGSI.TooManyResultsError Class: AlreadyExistsError new NGSI.AlreadyExistsError() Exception raised when creating an entity that already exists. Error code used by the context broker server: 422 Unprocessable Extends Error × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-09-10T17:52:44+02:00 . "},"NGSI.BadRequestError.html":{"id":"NGSI.BadRequestError.html","title":"Class: BadRequestError","body":" Documentation Namespaces NGSI Classes NGSI.AlreadyExistsErrorNGSI.BadRequestErrorNGSI.ConnectionNGSI.ConnectionErrorNGSI.InvalidRequestErrorNGSI.InvalidResponseErrorNGSI.NotFoundErrorNGSI.TooManyResultsError Class: BadRequestError new NGSI.BadRequestError() Exception raised when the provided data has errors. Error code used by the context broker server: 400 Bad Request Extends Error × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-09-10T17:52:44+02:00 . "},"NGSI.Connection.html":{"id":"NGSI.Connection.html","title":"Class: Connection","body":" Documentation Namespaces NGSI Classes NGSI.AlreadyExistsErrorNGSI.BadRequestErrorNGSI.ConnectionNGSI.ConnectionErrorNGSI.InvalidRequestErrorNGSI.InvalidResponseErrorNGSI.NotFoundErrorNGSI.TooManyResultsError Class: Connection new NGSI.Connection(url [, options]) Creates a new NGSI Connection. Parameters: Name Type Description url String | URL URL of the context broker [options] Object Object with extra options: headers (Object): Default headers to be sent when making requests through this connection. service (String): Default service/tenant to use when making requests through this connection. servicepath (String): Default service path to use when making requests through this connection. ngsi_proxy_url (String|URL): URL of the NGSI proxy to be used for receiving notifications. Examples Basic usage var connection = new NGSI.Connection(&quot;https://orion.example.com&quot;); Using the FIWARE Lab's instance var connection = new NGSI.Connection(&quot;http://orion.lab.fiware.org:1026&quot;, { headers: { &quot;X-Auth-Token&quot;: token } }); Methods getServerDetails([options]) Retrieves context broker server information. Parameters: Name Type Description [options] Object Object with extra options: correlator (String): Transaction id Returns: Type Promise Example connection.getServerDetails().then( (response) =&gt; { // Server information retrieved successfully // response.details contains all the details returned by the server. // response.correlator transaction id associated with the server response }, (error) =&gt; { // Error retrieving server information // If the error was reported by Orion, error.correlator will be // filled with the associated transaction id } ); v1.addAttributes(toAdd [, options]) Adds or updates entity attributes. This operation will create attributes and entities. Parameters: Name Type Description toAdd Array attribute additions [options] Object onSuccess: callback called if the request finishes successfully onFailure: callback called if the request finishes with errors onComplete: callback called regardless of whether the request is successful or not Example connection.v1.addAttributes([ { 'entity': {type: 'Technician', id: 'entity1'}, 'attributes': [ {'name': 'new_attribute', 'type': 'string', 'contextValue': 'value'} ] } ], { onSuccess: function (data, partial_errors) { } } ); v1.cancelAvailabilitySubscription(subId [, callbacks]) Cancels an existing context availability subscription. Parameters: Name Type Description subId String id of the subscription to cancel [callbacks] Object onSuccess: callback called if the request finishes successfully onFailure: callback called if the request finishes with errors onComplete: callback called regardless of whether the request is successful or not v1.cancelSubscription(subId [, options]) Cancels a context subscription Parameters: Name Type Description subId String id of the context subscription to cancel [options] Object onSuccess: callback called if the request finishes successfully onFailure: callback called if the request finishes with errors onComplete: callback called regardless of whether the request is successful or not Example connection.v1.cancelSubscription('sub1', { onSuccess: function (data) { // Subscription canceled successfully // data.subscriptionId should be equal to 'sub1' } } ); v1.createAvailabilitySubscription(entities, attributeNames, duration, restriction [, options]) Creates a subscription about context availability. Parameters: Name Type Description entities Array the list of Entities that are going to be queried attributeNames Array list of attribute names to query. Use null for retrieving all the attributes duration String time interval during which the registration will be active, using as reference the current time. String following the format defined at http://books.xmlschemata.org/relaxng/ch19-77073.html. restriction Object [options] Object onNotify: URL of the service or callback function to be used for notifying updates in the context availability onSuccess: callback called if the request finishes successfully onFailure: callback called if the request finishes with errors onComplete: callback called regardless of whether the request is successful or not v1.createRegistration(entities, attributes, duration, providingApplication [, callbacks]) Registers context information (entities and attributes) into the NGSI server. Parameters: Name Type Description entities Array the list of entities that are going to be registered attributes Array the list of attributes that are going to be assigned to the entities duration String time interval during which the registration will be active, using as reference the current time. String following the format defined at http://books.xmlschemata.org/relaxng/ch19-77073.html. providingApplication String the URI of the application to which this registration will belongs to [callbacks] Object onSuccess: callback called if the request finishes successfully onFailure: callback called if the request finishes with errors onComplete: callback called regardless of whether the request is successful or not Example connection.v1.createRegistration([ {type: 'Technician', id: 'entity1'} ], [ {name: 'attr1', type: 'string'}, {name: 'attr2'}, {name: 'attr3', type: 'number'} ], 'PT24H', 'http://app.example.com/', { onSuccess: function (data) { //data.subscriptionId } } ); v1.createSubscription(entities, attributeNames, duration, throttling, cond [, options]) Creates a context information subscription. Parameters: Name Type Description entities Array the list of Entities that are going to be queried attributeNames Array list of attribute names to query. Use null for retrieving all the attributes duration String time interval during which the registration will be active, using as reference the current time. String following the format defined at http://books.xmlschemata.org/relaxng/ch19-77073.html. throttling String minimal period of time in seconds which must elapse between two consecutive notifications. String following the format defined at http://books.xmlschemata.org/relaxng/ch19-77073.html. cond Array declare the condition or conditions that will trigger notifications. [options] Object onNotify: URL of the service or callback function to be used for notifying updates in the context availability onSuccess: callback called if the request finishes successfully onFailure: callback called if the request finishes with errors onComplete: callback called regardless of whether the request is successful or not Example connection.v1.createSubscription([ {type: 'Technician', id: 'tech*', isPattern: true}, {type: 'Van', id: 'van1'}, ], null, 'PT24H', null, [{type: 'ONCHANGE', condValues: ['position']}], { onNotify: function (data) { // called when a notification arrives }, onSuccess: function (data) { // subscription created successfully // data.subscriptionId contains the id associated with the created subscription } } ); v1.deleteAttributes(toDelete [, callbacks]) Deletes attributes form entities. This method also removes entities from the context broker server. Parameters: Name Type Description toDelete Array attributes to remove [callbacks] Object onSuccess: callback called if the request finishes successfully onFailure: callback called if the request finishes with errors onComplete: callback called regardless of whether the request is successful or not Examples Removing the `position` attribute from the `Madrid` entity connection.v1.deleteAttributes([ { 'entity': {type: 'City', id: 'Madrid'}, 'attributes': { 'name': 'position', 'type': 'coords' } } ], { onSuccess: function (data, partial_errors) { } } ); Removing `Madrid` from the context broker ** connection.v1.deleteAttributes([ { 'entity': {type: 'City', id: 'Madrid'} } ], { onSuccess: function (data, partial_errors) { } } ); v1.discoverAvailability(entities, attributeNames [, callbacks]) Discovers context information registrations on the NGSI server. Parameters: Name Type Description entities Array the list of Entities that are going to be queried attributeNames Array list of attribute names to query. Use null for retrieving all the attributes [callbacks] Object onSuccess: callback called if the request finishes successfully onFailure: callback called if the request finishes with errors onComplete: callback called regardless of whether the request is successful or not Example connection.v1.discoverAvailability([ {type: 'Technician', id: 'entity1'}, {type: 'Van', id: '.*', isPattern: true}, ], null, { onSuccess: function (registrations) { ... } } ); v1.getAvailableTypes([options]) Gets info about about the used context types. This information is currently composed of the type name and the attributes used with that type (the attribute set returned by this operation is the union of the attributes used in each of the entities belonging to that type). Parameters: Name Type Description [options] Object details (Boolean; default: true): Request total count limit (Number; default: 20): This option allow you to specify the maximum number of entities you want to receive from the server offset (Number; default: 0): Allows you to skip a given number of elements at the beginning onSuccess: callback called if the request finishes successfully onFailure: callback called if the request finishes with errors onComplete: callback called regardless of whether the request is successful or not Example connection.v1.getAvailableTypes({ onSuccess: function (types, details) { // The types parameter contains the information // about the available types, see next slide for // more info } }); v1.getTypeInfo(type, options) Gets info about about a concrete entity type. This information is currently composed of the type name and the attributes used with that type (the attribute set returned by this operation is the union of the attributes used in each of the entities belonging to that type). Parameters: Name Type Description type String Name of the type to query about options Object onSuccess: callback called if the request finishes successfully onFailure: callback called if the request finishes with errors onComplete: callback called regardless of whether the request is successful or not Example connection.v1.getTypeInfo(&quot;Room&quot;, { onSuccess: function (type_info) { // The type_info parameter contains the information // about the Room type, see next slide for more info } }); v1.query(Entities, attributeNames, options) Query for context information. That information is returned using pagination (see supported options), so its very recommended the use of the details option. Parameters: Name Type Description Entities Array list of Entities to query attributeNames Array list of attribute names to query. Use null for retrieving all the attributes options Object details (Boolean; default: false): Request total count limit (Number; default: 20): This option allow you to specify the maximum number of entities you want to receive from the server offset (Number; default: 0): Allows you to skip a given number of elements at the beginning onSuccess: callback called if the request finishes successfully onFailure: callback called if the request finishes with errors onComplete: callback called regardless of whether the request is successful or not Example connection.v1.query([ {type: 'Technician', id: '.*', isPattern: true} ], null, { limit: 100, offset: 200, details: true onSuccess: function (data, details) { ... } } ); v1.updateAttributes(update [, options]) Updates entity attributes Parameters: Name Type Description update Array attribute changes [options] Object onSuccess: callback called if the request finishes successfully onFailure: callback called if the request finishes with errors onComplete: callback called regardless of whether the request is successful or not Example connection.v1.updateAttributes([ { 'entity': {type: 'Technician', id: 'entity1'}, 'attributes': [ {name: 'mobile_phone', type: 'string', contextValue: '0034223456789'}, {name: 'attr2', contextValue: 'value'}, {name: 'attr3', contextValue: 5} ] } ], { onSuccess: function (data) { } } ); v1.updateAvailabilitySubscription(subId, entities, attributeNames, duration, restriction [, callbacks]) Updates an existing context availability subscription. Parameters: Name Type Description subId String id of the subscription to update entities Array the list of Entities that are going to be queried attributeNames Array list of attribute names to query. Use null for retrieving all the attributes duration String time interval during which the registration will be active, using as reference the current time. String following the format defined at http://books.xmlschemata.org/relaxng/ch19-77073.html. restriction Object [callbacks] Object onSuccess: callback called if the request finishes successfully onFailure: callback called if the request finishes with errors onComplete: callback called regardless of whether the request is successful or not v1.updateRegistration(regId, entities, attributes, duration, providingApplication [, callbacks]) Updates an existing registration. Parameters: Name Type Description regId String id of the registration to update entities Array list of entities to update attributes Array list of attributes to associate with this registration duration String time interval during which the registration will be active, using as reference the current time. String following the format defined at http://books.xmlschemata.org/relaxng/ch19-77073.html. providingApplication String URL identifing the source of the context information [callbacks] Object onSuccess: callback called if the request finishes successfully onFailure: callback called if the request finishes with errors onComplete: callback called regardless of whether the request is successful or not Example connection.v1.updateRegistration(&quot;167&quot;, [ {type: 'Technician', id: 'entity1'} ], [ {name: 'attr1', type: 'string'}, {name: 'attr2'} ], 'PT24H', 'http://app.example.com/' ); v1.updateRegistration(regId [, callbacks]) Cancels an existing registration by marking it as expired. Parameters: Name Type Description regId String id of the registration to cancelRegistration [callbacks] Object onSuccess: callback called if the request finishes successfully onFailure: callback called if the request finishes with errors onComplete: callback called regardless of whether the request is successful or not Example connection.v1.cancelRegistration(&quot;167&quot;, { onSuccess: function () { // Registration cancelled successfully } }); v1.updateSubscription(subId, duration, throttling, cond [, options]) Updates a context subcription. Parameters: Name Type Description subId String id of the subscription to update duration String time interval during which the registration will be active, using as reference the current time. String following the format defined at http://books.xmlschemata.org/relaxng/ch19-77073.html. throttling String minimal period of time in seconds which must elapse between two consecutive notifications. String following the format defined at http://books.xmlschemata.org/relaxng/ch19-77073.html. cond Object declare the condition or conditions that will trigger notifications. Pass null for not modifying current conditions. [options] Object onSuccess: callback called if the request finishes successfully onFailure: callback called if the request finishes with errors onComplete: callback called regardless of whether the request is successful or not Example connection.v1.updateSubscription( 'sub1', 'PT20H', null, null, { onSuccess: function (response_data) { // subscription updated successfully } } ); v2.appendEntityAttributes(changes [, options]) Updates or appends attributes to an entity. This method uses v2 of the FIWARE's NGSI Specification Parameters: Name Type Description changes Object New values for the attributes. Must contain the id of the entity to update and may contain the type option to avoid ambiguity in case there are several entities with the same entity id. [options] Object Object with extra options: correlator (String): transaction id keyValues (Boolean; default: false): Use flat attributes strict (Boolean; default: false): Force strict append semantics service (String): Service/tenant to use in this operation servicepath (String): Service path to use in this operation type (String): Entity type, to avoid ambiguity in case there are several entities with the same entity id. Since: 1.0 Throws: NGSI.BadRequestError NGSI.ConnectionError NGSI.InvalidResponseError NGSI.NotFoundError NGSI.TooManyResultsError Returns: Type Promise Examples Append or update the temperature attribute connection.v2.appendEntityAttributes({ &quot;id&quot;: &quot;Bcn-Welt&quot;, &quot;temperature&quot;: { &quot;value&quot;: 31.5 } }).then( (response) =&gt; { // Attributes appended successfully // response.correlator transaction id associated with the server response }, (error) =&gt; { // Error appending the attributes to the entity // If the error was reported by Orion, error.correlator will be // filled with the associated transaction id } ); Append the temperature attribute connection.v2.appendEntityAttributes({ &quot;id&quot;: &quot;Bcn-Welt&quot;, &quot;temperature&quot;: 31.5 }, { strict: true, keyValues: true }).then( (response) =&gt; { // Attributes appended successfully // response.correlator transaction id associated with the server response }, (error) =&gt; { // Error appending the attributes to the entity // If the error was reported by Orion, error.correlator will be // filled with the associated transaction id } ); v2.batchQuery(query [, options]) This operation allows to make several entity queries at once. This method uses v2 of the FIWARE's NGSI Specification Parameters: Name Type Description query Object Object with the parameters to make the entity queries. Composed of those attributes: entities (Array): a list of entites to search for. Each element is represented by a JSON object with the following elements: id or idPattern: Id or pattern of the affected entities. Both cannot be used at the same time, but one of them must be present. type or typePattern: Type or type pattern of the entities total search for. Both cannot be used at the same time. If omitted, it means &quot;any entity type&quot; attributes (Array): a list of attribute names to search for. If omitted, it means &quot;all attributes&quot;. metadata (Array): a list of metadata names to include in the response. See &quot;Filtering out attributes and metadata&quot; section for more detail. [options] Object Object with extra options: correlator (String): Transaction id count (Boolean; default: false): Request total count limit (Number; default: 20): This option allow you to specify the maximum number of entities you want to receive from the server offset (Number; default: 0): Allows you to skip a given number of elements at the beginning orderBy (String): Criteria for ordering results service (String): Service/tenant to use in this operation servicepath (String): Service path to use in this operation unique (Boolean): Represent entities as an array of non-repeated attribute values. values (Boolean): Represent entities as an array of attribute values Since: 1.0 Throws: NGSI.BadRequestError NGSI.ConnectionError NGSI.InvalidResponseError Returns: Type Promise Example Retrieve first 20 entities from the Context Broker connection.v2.batchQuery({ &quot;entities&quot;: [ { &quot;idPattern&quot;: &quot;.*&quot;, &quot;type&quot;: &quot;myFooType&quot; }, { &quot;id&quot;: &quot;myBar&quot;, &quot;type&quot;: &quot;myBarType&quot; } ], &quot;attributes&quot;: [ &quot;temperature&quot;, &quot;humidity&quot; ] }).then( (response) =&gt; { // Entities retrieved successfully // response.correlator transaction id associated with the server response // response.limit contains the used page size // response.results is an array with the retrieved entities // response.offset contains the offset used in the request }, (error) =&gt; { // Error retrieving entities // If the error was reported by Orion, error.correlator will be // filled with the associated transaction id } ); v2.batchUpdate(changes [, options]) This operation allows to create, update and/or delete several entities in a single batch operation. This method uses v2 of the FIWARE's NGSI Specification Parameters: Name Type Description changes Object [options] Object Object with extra options: correlator (String): Transaction id keyValues (Boolean; default: false): Use flat attributes service (String): Service/tenant to use in this operation servicepath (String): Service path to use in this operation Since: 1.0 Throws: NGSI.BadRequestError NGSI.ConnectionError NGSI.InvalidResponseError Returns: Type Promise Example Basic usage connection.v2.batchUpdate({ &quot;actionType&quot;: &quot;APPEND&quot;, &quot;entities&quot;: [ { &quot;type&quot;: &quot;Room&quot;, &quot;id&quot;: &quot;Bcn-Welt&quot;, &quot;temperature&quot;: { &quot;value&quot;: 21.7 }, &quot;humidity&quot;: { &quot;value&quot;: 60 } }, { &quot;type&quot;: &quot;Room&quot;, &quot;id&quot;: &quot;Mad_Aud&quot;, &quot;temperature&quot;: { &quot;value&quot;: 22.9 }, &quot;humidity&quot;: { &quot;value&quot;: 85 } } ] }).then( (response) =&gt; { // Attributes appended successfully // response.correlator transaction id associated with the server response }, (error) =&gt; { // Error appending attributes to the entities // If the error was reported by Orion, error.correlator will be // filled with the associated transaction id } ); v2.createEntity(entity [, options]) Creates a new entity. This method uses v2 of the FIWARE's NGSI Specification Parameters: Name Type Description entity Object values to be used for creating the new entity. Requires at least the id value for the new entity. [options] Object Object with extra options: correlator (String): Transaction id keyValues (Boolean; default: false): Use flat attributes service (String): Service/tenant to use in this operation servicepath (String): Service path to use in this operation upsert (Boolean; default: false): If true, entity is updated if already exits. If upsert is false this operation will fail if the entity already exists. Since: 1.0 Throws: NGSI.AlreadyExistsError NGSI.BadRequestError NGSI.ConnectionError NGSI.InvalidResponseError Returns: Type Promise Examples Basic usage connection.v2.createEntity({ &quot;id&quot;: &quot;Spain-Road-A62&quot;, &quot;type&quot;: &quot;Road&quot;, &quot;name&quot;: {&quot;value&quot;: &quot;A-62&quot;}, &quot;alternateName&quot;: {&quot;value&quot;: &quot;E-80&quot;}, &quot;description&quot;: {&quot;value&quot;: &quot;Autovía de Castilla&quot;}, &quot;roadClass&quot;: {&quot;value&quot;: &quot;motorway&quot;}, &quot;length&quot;: {&quot;value&quot;: 355}, &quot;refRoadSegment&quot;: { &quot;value&quot;: [ &quot;Spain-RoadSegment-A62-0-355-forwards&quot;, &quot;Spain-RoadSegment-A62-0-355-backwards&quot; ] }, &quot;responsible&quot;: {&quot;value&quot;: &quot;Ministerio de Fomento - Gobierno de España&quot;} }).then( (response) =&gt; { // Entity created successfully // response.correlator transaction id associated with the server response }, (error) =&gt; { // Error creating the entity // If the error was reported by Orion, error.correlator will be // filled with the associated transaction id } ); Using the keyValues option connection.v2.createEntity({ &quot;id&quot;: &quot;Spain-Road-A62&quot;, &quot;type&quot;: &quot;Road&quot;, &quot;name&quot;: &quot;A-62&quot;, &quot;alternateName&quot;: &quot;E-80&quot;, &quot;description&quot;: &quot;Autovía de Castilla&quot;, &quot;roadClass&quot;: &quot;motorway&quot;, &quot;length&quot;: 355, &quot;refRoadSegment&quot;: [ &quot;Spain-RoadSegment-A62-0-355-forwards&quot;, &quot;Spain-RoadSegment-A62-0-355-backwards&quot; ], &quot;responsible&quot;: &quot;Ministerio de Fomento - Gobierno de España&quot; }, {keyValues: true}).then( (response) =&gt; { // Entity created successfully // response.correlator transaction id associated with the server response }, (error) =&gt; { // Error creating the entity // If the error was reported by Orion, error.correlator will be // filled with the associated transaction id } ); v2.createSubscription(subscription [, options]) Creates a new subscription. This method uses v2 of the FIWARE's NGSI Specification Parameters: Name Type Description subscription Object values to be used for creating it [options] Object Object with extra options: correlator (String): Transaction id service (String): Service/tenant to use in this operation servicepath (String): Service path to use in this operation Since: 1.0 Throws: NGSI.BadRequestError NGSI.ConnectionError NGSI.InvalidResponseError Returns: Type Promise Examples Basic usage connection.v2.createSubscription({ &quot;description&quot;: &quot;One subscription to rule them all&quot;, &quot;subject&quot;: { &quot;entities&quot;: [ { &quot;idPattern&quot;: &quot;.*&quot;, &quot;type&quot;: &quot;Room&quot; } ], &quot;condition&quot;: { &quot;attrs&quot;: [ &quot;temperature&quot; ], &quot;expression&quot;: { &quot;q&quot;: &quot;temperature&gt;40&quot; } } }, &quot;notification&quot;: { &quot;http&quot;: { &quot;url&quot;: &quot;http://localhost:1234&quot; }, &quot;attrs&quot;: [ &quot;temperature&quot;, &quot;humidity&quot; ] }, &quot;expires&quot;: &quot;2016-04-05T14:00:00.00Z&quot;, &quot;throttling&quot;: 5 }).then( (response) =&gt; { // Subscription created successfully // response.correlator transaction id associated with the server response }, (error) =&gt; { // Error creating the subscription // If the error was reported by Orion, error.correlator will be // filled with the associated transaction id } ); Creating a subscription using a callback connection.v2.createSubscription({ &quot;description&quot;: &quot;One subscription to rule them all&quot;, &quot;subject&quot;: { &quot;entities&quot;: [ { &quot;idPattern&quot;: &quot;.*&quot;, &quot;type&quot;: &quot;Room&quot; } ], &quot;condition&quot;: { &quot;attrs&quot;: [ &quot;temperature&quot; ], &quot;expression&quot;: { &quot;q&quot;: &quot;temperature&gt;40&quot; } } }, &quot;notification&quot;: { &quot;callback&quot;: function (notification) { // notification.attrsformat provides information about the format used by notification.data // notification.data contains the modified entities // notification.subscriptionId provides the associated subscription id // etc... }, &quot;attrs&quot;: [ &quot;temperature&quot;, &quot;humidity&quot; ] }, &quot;expires&quot;: &quot;2016-04-05T14:00:00.00Z&quot;, &quot;throttling&quot;: 5 }).then( (response) =&gt; { // Subscription created successfully // response.correlator transaction id associated with the server response }, (error) =&gt; { // Error creating the subscription // If the error was reported by Orion, error.correlator will be // filled with the associated transaction id } ); v2.deleteEntity(options) Removes an entity from the orion context broker server. This method uses v2 of the FIWARE's NGSI Specification Parameters: Name Type Description options String | Object String with the entity id to remove or an object providing options: correlator (String): Transaction id id (String, required): Id of the entity to remove service (String): Service/tenant to use in this operation servicepath (String): Service path to use in this operation type (String): Entity type, to avoid ambiguity in case there are several entities with the same entity id. Since: 1.0 Throws: NGSI.ConnectionError NGSI.InvalidResponseError NGSI.NotFoundError NGSI.TooManyResultsError Returns: Type Promise Examples Remove entity by Id connection.v2.deleteEntity(&quot;Spain-Road-A62&quot;).then( (response) =&gt; { // Entity deleted successfully // response.correlator transaction id associated with the server response }, (error) =&gt; { // Error deleting the entity // If the error was reported by Orion, error.correlator will be // filled with the associated transaction id } ); Remove entity by Id and type connection.v2.deleteEntity({ id: &quot;Spain-Road-A62&quot;, type: &quot;Road&quot; }).then( (response) =&gt; { // Entity deleted successfully // response.correlator transaction id associated with the server response }, (error) =&gt; { // Error deleting the entity // If the error was reported by Orion, error.correlator will be // filled with the associated transaction id } ); v2.deleteEntityAttribute(options) Removes a single attribute from an entity stored in the orion context broker server. This method uses v2 of the FIWARE's NGSI Specification Parameters: Name Type Description options Object Object providing information about the attribute to remove and any extra options: attribute (String, required): Name of the attribute to delete correlator (String): Transaction id id (String, required): Id of the entity to modify service (String): Service/tenant to use in this operation servicepath (String): Service path to use in this operation type (String): Entity type, to avoid ambiguity in case there are several entities with the same entity id. Since: 1.0 Throws: NGSI.ConnectionError NGSI.InvalidResponseError NGSI.NotFoundError NGSI.TooManyResultsError Returns: Type Promise Examples Remove an attribute from an entity connection.v2.deleteEntityAttribute({ id: &quot;Bcn_Welt&quot;, attribute: &quot;temperature&quot; }).then( (response) =&gt; { // Entity attribute deleted successfully // response.correlator transaction id associated with the server response }, (error) =&gt; { // Error deleting the entity // If the error was reported by Orion, error.correlator will be // filled with the associated transaction id } ); Remove an attribute from an entity indicating the entity type connection.v2.deleteEntityAttribute({ id: &quot;Bcn_Welt&quot;, type: &quot;Room&quot;, attribute: &quot;temperature&quot; }).then( (response) =&gt; { // Entity attribute deleted successfully // response.correlator transaction id associated with the server response }, (error) =&gt; { // Error deleting the entity // If the error was reported by Orion, error.correlator will be // filled with the associated transaction id } ); v2.deleteSubscription(options) Removes a subscription from the orion context broker server. This method uses v2 of the FIWARE's NGSI Specification Parameters: Name Type Description options String | Object String with the id of the subscription to remove or an object with options: correlator (String): Transaction id id (String): Id of the subscription to remove service (String): Service/tenant to use in this operation servicepath (String): Service path to use in this operation Since: 1.0 Throws: NGSI.ConnectionError NGSI.InvalidResponseError NGSI.NotFoundError Returns: Type Promise Example connection.v2.deleteSubscription(&quot;57f7787a5f817988e4eb3dda&quot;).then( (response) =&gt; { // Subscription deleted successfully // response.correlator transaction id associated with the server response }, (error) =&gt; { // Error deleting subscription // If the error was reported by Orion, error.correlator will be // filled with the associated transaction id } ); v2.getEntity(options) Gets all the details of an entity. This method uses v2 of the FIWARE's NGSI Specification Parameters: Name Type Description options String | Object String with the id of the entity to query or an object with extra options: correlator (String): Transaction id keyValues (Boolean; default: false): Use flat attributes id (String, required): Id of the entity to query service (String): Service/tenant to use in this operation servicepath (String): Service path to use in this operation type (String): Entity type, to avoid ambiguity in case there are several entities with the same entity id. Since: 1.0 Throws: NGSI.ConnectionError NGSI.InvalidResponseError NGSI.NotFoundError NGSI.TooManyResultsError Returns: Type Promise Examples Basic usage connection.v2.getEntity(&quot;Spain-Road-A62&quot;).then( (response) =&gt; { // Entity details retrieved successfully // response.entity entity details // response.correlator transaction id associated with the server response }, (error) =&gt; { // Error retrieving entity // If the error was reported by Orion, error.correlator will be // filled with the associated transaction id } ); Retrieve a typed entity and using the keyValues option connection.v2.getEntity({ id: &quot;Spain-Road-A62&quot;, type: &quot;Road&quot;, keyValues: true }).then( (response) =&gt; { // Entity details retrieved successfully // response.entity entity details // response.correlator transaction id associated with the server response }, (error) =&gt; { // Error retrieving entity // If the error was reported by Orion, error.correlator will be // filled with the associated transaction id } ); v2.getEntityAttribute(options) Gets the details about an entity attribute. This method uses v2 of the FIWARE's NGSI Specification Parameters: Name Type Description options Object Object with options: attribute (String, required): Name of the attribute to query correlator (String): Transaction id id (String, required): Id of the entity to query service (String): Service/tenant to use in this operation servicepath (String): Service path to use in this operation type (String): Entity type, to avoid ambiguity in case there are several entities with the same entity id. Since: 1.0 Throws: NGSI.ConnectionError NGSI.InvalidResponseError NGSI.NotFoundError NGSI.TooManyResultsError Returns: Type Promise Examples Basic usage connection.v2.getEntityAttribute({ id: &quot;Bcn_Welt&quot;, attribute: &quot;temperature&quot; }).then( (response) =&gt; { // Entity details retrieved successfully // response.attribute attribute details // response.correlator transaction id associated with the server response }, (error) =&gt; { // Error retrieving entity // If the error was reported by Orion, error.correlator will be // filled with the associated transaction id } ); Get entity attribute using the type option connection.v2.getEntityAttribute({ id: &quot;Bcn_Welt&quot;, type: &quot;Room&quot;, attribute: &quot;temperature&quot; }).then( (response) =&gt; { // Entity details retrieved successfully // response.attribute attribute details // response.correlator transaction id associated with the server response }, (error) =&gt; { // Error retrieving entity // If the error was reported by Orion, error.correlator will be // filled with the associated transaction id } ); v2.getEntityAttributes(options) Gets all the attributes of an entity. This method uses v2 of the FIWARE's NGSI Specification Parameters: Name Type Description options String | Object String with the id of the entity to query or an object with extra options: correlator (String): Transaction id keyValues (Boolean; default: false): Use flat attributes id (String, required): Id of the entity to query service (String): Service/tenant to use in this operation servicepath (String): Service path to use in this operation type (String): Entity type, to avoid ambiguity in case there are several entities with the same entity id. Since: 1.0 Throws: NGSI.ConnectionError NGSI.InvalidResponseError NGSI.NotFoundError NGSI.TooManyResultsError Returns: Type Promise Examples Basic usage connection.v2.getEntityAttributes(&quot;Spain-Road-A62&quot;).then( (response) =&gt; { // Entity attributes retrieved successfully // response.attributes entity attributes // response.correlator transaction id associated with the server response }, (error) =&gt; { // Error retrieving the attributes of the entity // If the error was reported by Orion, error.correlator will be // filled with the associated transaction id } ); Retrieve a typed entity and using the keyValues option connection.v2.getEntityAttributes({ id: &quot;Spain-Road-A62&quot;, type: &quot;Road&quot;, keyValues: true }).then( (response) =&gt; { // Entity attributes retrieved successfully // response.attributes entity attributes // response.correlator transaction id associated with the server response }, (error) =&gt; { // Error retrieving the attributes of the entity // If the error was reported by Orion, error.correlator will be // filled with the associated transaction id } ); v2.getEntityAttributeValue(options) Gets the value of an entity attribute. This method uses v2 of the FIWARE's NGSI Specification Parameters: Name Type Description options Object Object with extra options: attribute (String, required): Name of the attribute to query correlator (String): Transaction id id (String, required): Id of the entity to query service (String): Service/tenant to use in this operation servicepath (String): Service path to use in this operation type (String): Entity type, to avoid ambiguity in case there are several entities with the same entity id. Since: 1.0 Throws: NGSI.ConnectionError NGSI.InvalidResponseError NGSI.NotFoundError NGSI.TooManyResultsError Returns: Type Promise Examples Basic usage connection.v2.getEntityAttributeValue({ id: &quot;Bcn_Welt&quot;, attribute: &quot;temperature&quot; }).then( (response) =&gt; { // Entity value retrieved successfully // response.value entity value // response.correlator transaction id associated with the server response }, (error) =&gt; { // Error retrieving attribute value // If the error was reported by Orion, error.correlator will be // filled with the associated transaction id } ); Get attribute value from a typed entity connection.v2.getEntityAttributeValue({ id: &quot;Bcn_Welt&quot;, type: &quot;Room&quot;, attribute: &quot;temperature&quot; }).then( (response) =&gt; { // Entity value retrieved successfully // response.value entity value // response.correlator transaction id associated with the server response }, (error) =&gt; { // Error retrieving attribute value // If the error was reported by Orion, error.correlator will be // filled with the associated transaction id } ); v2.getSubscription(options) Gets all the details of a subscription. This method uses v2 of the FIWARE's NGSI Specification Parameters: Name Type Description options String | Object Object with extra options: correlator (String): Transaction id service (String): Service/tenant to use in this operation servicepath (String): Service path to use in this operation Since: 1.0 Throws: NGSI.ConnectionError NGSI.InvalidResponseError NGSI.NotFoundError Returns: Type Promise Example Basic usage connection.v2.getSubscription(&quot;abcdef&quot;).then( (response) =&gt; { // Subscription details retrieved successfully // response.subscription subscription details // response.correlator transaction id associated with the server response }, (error) =&gt; { // Error retrieving subscription // If the error was reported by Orion, error.correlator will be // filled with the associated transaction id } ); v2.getType(options) Gets all the details about an entity type. This method uses v2 of the FIWARE's NGSI Specification Parameters: Name Type Description options String | Object Object with extra options: correlator (String): Transaction id service (String): Service/tenant to use in this operation servicepath (String): Service path to use in this operation Since: 1.0 Throws: NGSI.ConnectionError NGSI.InvalidResponseError NGSI.NotFoundError Returns: Type Promise Example Basic usage connection.v2.getType(&quot;Room&quot;).then( (response) =&gt; { // Type details retrieved successfully // response.type type details // response.correlator transaction id associated with the server response }, (error) =&gt; { // Error retrieving type // If the error was reported by Orion, error.correlator will be // filled with the associated transaction id } ); v2.listEntities([options]) Retrieves the available entities using pagination. This method uses v2 of the FIWARE's NGSI Specification Parameters: Name Type Description [options] Object Object with extra options: attrs (String): Comma-separated list of attribute names whose data are to be included in the response. The attributes are retrieved in the order specified by this parameter. If this parameter is not included, the attributes are retrieved in arbitrary order. correlator (String): Transaction id count (Boolean; default: false): Request total count id (String): A comma-separated list of entity ids to retrieve. Incompatible with the idPattern option. idPattern (String): A correctly formated regular expression. Retrieve entities whose ID matches the regular expression. Incompatible with the id option limit (Number; default: 20): This option allow you to specify the maximum number of entities you want to receive from the server offset (Number; default: 0): Allows you to skip a given number of elements at the beginning metadata (String): A comma-separated list of metadata names to include in the response mq (String): A query expression for attribute metadata, composed of a list of statements separated by semicolons (;) orderBy (String): Criteria for ordering results q (String): A query expression, composed of a list of statements separated by semicolons (;) service (String): Service/tenant to use in this operation servicepath (String): Service path to use in this operation type (String): A comma-separated list of entity types to retrieve. Incompatible with the typePattern option. typePattern (String): A correctly formated regular expression. Retrieve entities whose type matches the regular expression. Incompatible with the type option. unique (Boolean): Represent entities as an array of non-repeated attribute values. values (Boolean): Represent entities as an array of attribute values Since: 1.0 Throws: NGSI.ConnectionError NGSI.InvalidResponseError Returns: Type Promise Examples Retrieve first 20 entities from the Context Broker connection.v2.listEntities().then( (response) =&gt; { // Entities retrieved successfully // response.correlator transaction id associated with the server response // response.limit contains the used page size // response.results is an array with the retrieved entities // response.offset contains the offset used in the request }, (error) =&gt; { // Error retrieving entities // If the error was reported by Orion, error.correlator will be // filled with the associated transaction id } ); Retrieve second page from the Context Broker requesting pagination details connection.v2.listEntities({offset: 20, count: true}).then( (response) =&gt; { // Entities retrieved successfully // response.results is an array with the retrieved entities // response.correlator transaction id associated with the server response // response.count contains the total number of entities selected // by this query // response.offset contains the offset used in the request }, (error) =&gt; { // Error retrieving entities // If the error was reported by Orion, error.correlator will be // filled with the associated transaction id } ); v2.listSubscriptions([options]) Retrieves the available subscriptions (using pagination). This method uses v2 of the FIWARE's NGSI Specification Parameters: Name Type Description [options] Object Object with extra options: correlator (String): Transaction id count (Boolean; default: false): request total count limit (Number; default: 20): This option allow you to specify the maximum number of subscriptions you want to receive from the server offset (Number; default: 0): Allows you to skip a given number of elements at the beginning service (String): Service/tenant to use in this operation servicepath (String): Service path to use in this operation Since: 1.0 Throws: NGSI.ConnectionError NGSI.InvalidResponseError Returns: Type Promise Examples Retrieve first 20 subscriptions from the Context Broker connection.v2.listSubscriptions().then( (response) =&gt; { // Subscriptions retrieved successfully // response.results is an array with the retrieved subscriptions }, (error) =&gt; { // Error retrieving subscriptions // If the error was reported by Orion, error.correlator will be // filled with the associated transaction id } ); Retrieve second page from the Context Broker requesting pagination details connection.v2.listSubscriptions({offset: 20, details: true}).then( (response) =&gt; { // Subscriptions retrieved successfully // response.correlator transaction id associated with the server response // response.limit contains the used page size // response.results is an array with the retrieved subscriptions // response.count contains the number of available subscriptions // response.offset contains the offset used in the request }, (error) =&gt; { // Error retrieving subscriptions // If the error was reported by Orion, error.correlator will be // filled with the associated transaction id } ); v2.listTypes([options]) Retrieves the available types (using pagination). This method uses v2 of the FIWARE's NGSI Specification Parameters: Name Type Description [options] Object Object with extra options: correlator (String): Transaction id count (Boolean; default: false): request total count limit (Number; default: 20): This option allow you to specify the maximum number of subscriptions you want to receive from the server offset (Number; default: 0): Allows you to skip a given number of elements at the beginning service (String): Service/tenant to use in this operation servicepath (String): Service path to use in this operation Since: 1.0 Throws: NGSI.ConnectionError NGSI.InvalidResponseError Returns: Type Promise Examples Retrieve first 20 subscriptions from the Context Broker connection.v2.listTypes().then( (response) =&gt; { // Types retrieved successfully // response.results is an array with the retrieved subscriptions }, (error) =&gt; { // Error retrieving available types // If the error was reported by Orion, error.correlator will be // filled with the associated transaction id } ); Retrieve second page from the Context Broker requesting pagination details connection.v2.listTypes({offset: 20, count: true}).then( (response) =&gt; { // Types retrieved successfully // response.correlator transaction id associated with the server response // response.limit contains the used page size // response.results is an array with the retrieved subscriptions // response.count contains the number of available subscriptions // response.offset contains the offset used in the request }, (error) =&gt; { // Error retrieving available types // If the error was reported by Orion, error.correlator will be // filled with the associated transaction id } ); v2.replaceEntityAttribute(changes [, options]) Update the details about an entity attribute. This method uses v2 of the FIWARE's NGSI Specification Parameters: Name Type Description changes Object Object with the new values for the attribute. Can also be used for providing options. See the options parameter. [options] Object Object with options (those options can also be passed inside the changes parameter): attribute (String, required): Name of the attribute to modify correlator (String): Transaction id id (String, required): Id of the entity to modify service (String): Service/tenant to use in this operation servicepath (String): Service path to use in this operation type (String): Entity type, to avoid ambiguity in case there are several entities with the same entity id. Since: 1.0 Throws: NGSI.BadRequestError NGSI.ConnectionError NGSI.InvalidResponseError NGSI.NotFoundError NGSI.TooManyResultsError Returns: Type Promise Examples Simple usage connection.v2.replaceEntityAttribute({ id: &quot;Bcn_Welt&quot;, attribute: &quot;temperature&quot; value: 25, metadata: { &quot;unitCode&quot;: { &quot;value&quot;: &quot;CEL&quot; } } }).then( (response) =&gt; { // Entity attribute replaced successfully // response.attribute attribute details // response.correlator transaction id associated with the server response }, (error) =&gt; { // Error replacing entity attribute // If the error was reported by Orion, error.correlator will be // filled with the associated transaction id // Entity details retrieved successfully } ); Partial update connection.v2.getEntityAttribute({ id: &quot;Bcn_Welt&quot;, attribute: &quot;temperature&quot; }).then((response) =&gt; { var changes = response.attribute; changes.metadata.unitCode = { &quot;value&quot;: &quot;FAR&quot; }; return connection.v2.replaceEntityAttribute(changes, { id: &quot;Bcn_Welt&quot;, attribute: &quot;temperature&quot; }); }).then( (response) =&gt; { // Entity attribute replaced successfully // response.attribute attribute details // response.correlator transaction id associated with the server response }, (error) =&gt; { // Error replacing entity attribute // If the error was reported by Orion, error.correlator will be // filled with the associated transaction id } ); v2.replaceEntityAttributes(entity [, options]) Replaces all the attributes associated with a entity. This method uses v2 of the FIWARE's NGSI Specification Parameters: Name Type Description entity Object New values for the attributes. Must contain the id of the entity to update and may contain the type option to avoid ambiguity in case there are several entities with the same entity id. [options] Object Object with extra options: correlator (String): Transaction id keyValues (Boolean; default: false): Use flat attributes service (String): Service/tenant to use in this operation servicepath (String): Service path to use in this operation Since: 1.0 Throws: NGSI.BadRequestError NGSI.ConnectionError NGSI.InvalidResponseError NGSI.NotFoundError NGSI.TooManyResultsError Returns: Type Promise Examples Basic usage connection.v2.replaceEntityAttributes({ &quot;id&quot;: &quot;Spain-Road-A62&quot;, &quot;type&quot;: &quot;Road&quot;, &quot;name&quot;: {&quot;value&quot;: &quot;A-62&quot;}, &quot;alternateName&quot;: {&quot;value&quot;: &quot;E-80&quot;}, &quot;description&quot;: {&quot;value&quot;: &quot;Autovía de Castilla&quot;}, &quot;roadClass&quot;: {&quot;value&quot;: &quot;motorway&quot;}, &quot;length&quot;: {&quot;value&quot;: 355}, &quot;refRoadSegment&quot;: { &quot;value&quot;: [ &quot;Spain-RoadSegment-A62-0-355-forwards&quot;, &quot;Spain-RoadSegment-A62-0-355-backwards&quot; ] }, &quot;responsible&quot;: {&quot;value&quot;: &quot;Ministerio de Fomento - Gobierno de España&quot;} }).then( (response) =&gt; { // Entity attributes replaced successfully // response.correlator transaction id associated with the server response }, (error) =&gt; { // Error replacing the attributes of the entity // If the error was reported by Orion, error.correlator will be // filled with the associated transaction id } ); Using the keyValues option connection.v2.replaceEntityAttributes({ &quot;id&quot;: &quot;Spain-Road-A62&quot;, &quot;type&quot;: &quot;Road&quot;, &quot;name&quot;: &quot;A-62&quot;, &quot;alternateName&quot;: &quot;E-80&quot;, &quot;description&quot;: &quot;Autovía de Castilla&quot;, &quot;roadClass&quot;: &quot;motorway&quot;, &quot;length&quot;: 355, &quot;refRoadSegment&quot;: [ &quot;Spain-RoadSegment-A62-0-355-forwards&quot;, &quot;Spain-RoadSegment-A62-0-355-backwards&quot; ], &quot;responsible&quot;: &quot;Ministerio de Fomento - Gobierno de España&quot; }, {keyValues: true}).then( (response) =&gt; { // Entity attributes replaced successfully // response.correlator transaction id associated with the server response }, (error) =&gt; { // Error replacing the attributes of the entity // If the error was reported by Orion, error.correlator will be // filled with the associated transaction id } ); v2.replaceEntityAttributeValue(options) Updates the value of an entity attribute. This method uses v2 of the FIWARE's NGSI Specification Parameters: Name Type Description options Object Object with options: attribute (String, required): Name of the attribute to query correlator (String): Transaction id id (String, required): Id of the entity to query service (String): Service/tenant to use in this operation servicepath (String): Service path to use in this operation value (String|Boolean|Number|Object|Array, required) new value type (String): Entity type, to avoid ambiguity in case there are several entities with the same entity id. Since: 1.0 Throws: NGSI.BadRequestError NGSI.ConnectionError NGSI.InvalidResponseError NGSI.NotFoundError NGSI.TooManyResultsError Returns: Type Promise Examples Basic usage connection.v2.replaceEntityAttributeValue({ id: &quot;Bcn_Welt&quot;, attribute: &quot;temperature&quot;, value: 21 }).then( (response) =&gt; { // Entity value replaced successfully // response.value entity value // response.correlator transaction id associated with the server response }, (error) =&gt; { // Error replacing attribute value // If the error was reported by Orion, error.correlator will be // filled with the associated transaction id } ); Get attribute value from a typed entity connection.v2.replaceEntityAttributeValue({ id: &quot;Bcn_Welt&quot;, type: &quot;Room&quot;, attribute: &quot;temperature&quot;, value: 21 }).then( (response) =&gt; { // Entity value replaced successfully // response.value entity value // response.correlator transaction id associated with the server response }, (error) =&gt; { // Error replacing attribute value // If the error was reported by Orion, error.correlator will be // filled with the associated transaction id } ); v2.updateEntityAttributes(changes [, options]) Updates attributes of an entity. This method uses v2 of the FIWARE's NGSI Specification Parameters: Name Type Description changes Object New values for the attributes. Must contain the id of the entity to update and may contain the type option to avoid ambiguity in case there are several entities with the same entity id. [options] Object Object with extra options: correlator (String): Transaction id keyValues (Boolean; default: false): Use flat attributes service (String): Service/tenant to use in this operation servicepath (String): Service path to use in this operation Since: 1.0 Throws: NGSI.BadRequestError NGSI.ConnectionError NGSI.InvalidResponseError NGSI.NotFoundError NGSI.TooManyResultsError Returns: Type Promise Examples Basic attribute update connection.v2.updateEntityAttributes({ &quot;id&quot;: &quot;sensor&quot;, &quot;temperature&quot;: { &quot;value&quot;: 31.5 }, &quot;humidity&quot;: { &quot;value&quot;: 50.2 } }).then( (response) =&gt; { // Attributes updated successfully // response.correlator transaction id associated with the server response }, (error) =&gt; { // Error updating the attributes of the entity // If the error was reported by Orion, error.correlator will be // filled with the associated transaction id } ); Update some attributes using the keyValues option connection.v2.updateEntityAttributes({ &quot;id&quot;: &quot;sensor&quot;, &quot;temperature&quot;: 31.5 &quot;humidity&quot;: 50.2 }, { keyValues: true }).then( (response) =&gt; { // Attributes updated successfully // response.correlator transaction id associated with the server response }, (error) =&gt; { // Error updating the attributes of the entity // If the error was reported by Orion, error.correlator will be // filled with the associated transaction id } ); v2.updateSubscription(changes [, options]) Updates a subscription. This method uses v2 of the FIWARE's NGSI Specification Parameters: Name Type Description changes Object [options] Object Object with extra options: correlator (String): Transaction id service (String): Service/tenant to use in this operation servicepath (String): Service path to use in this operation Since: 1.0 Throws: NGSI.ConnectionError NGSI.InvalidResponseError NGSI.NotFoundError Returns: Type Promise Examples Update subscription expiration time connection.v2.updateSubscription({ &quot;id&quot;: &quot;abcdef&quot;, &quot;expires&quot;: &quot;2016-04-05T14:00:00.00Z&quot; }).then( (response) =&gt; { // Subscription updated successfully // response.correlator transaction id associated with the server response }, (error) =&gt; { // Error updating subscription // If the error was reported by Orion, error.correlator will be // filled with the associated transaction id } ); Use a custom service path for the update operation connection.v2.updateSubscription({ &quot;id&quot;: &quot;abcdef&quot;, &quot;expires&quot;: &quot;2016-04-05T14:00:00.00Z&quot; }, { servicepath: &quot;/Spain/Madrid&quot; }).then( (response) =&gt; { // Subscription updated successfully // response.correlator transaction id associated with the server response }, (error) =&gt; { // Error updating subscription // If the error was reported by Orion, error.correlator will be // filled with the associated transaction id } ); × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-09-10T17:52:44+02:00 . "},"NGSI.ConnectionError.html":{"id":"NGSI.ConnectionError.html","title":"Class: ConnectionError","body":" Documentation Namespaces NGSI Classes NGSI.AlreadyExistsErrorNGSI.BadRequestErrorNGSI.ConnectionNGSI.ConnectionErrorNGSI.InvalidRequestErrorNGSI.InvalidResponseErrorNGSI.NotFoundErrorNGSI.TooManyResultsError Class: ConnectionError new NGSI.ConnectionError() Error raised if there are problems connecting to the context broker server. Browsers doesn't provide details about the connection problem due security concerns, so this exception doesn't provide those details. Extends Error × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-09-10T17:52:44+02:00 . "},"NGSI.InvalidRequestError.html":{"id":"NGSI.InvalidRequestError.html","title":"Class: InvalidRequestError","body":" Documentation Namespaces NGSI Classes NGSI.AlreadyExistsErrorNGSI.BadRequestErrorNGSI.ConnectionNGSI.ConnectionErrorNGSI.InvalidRequestErrorNGSI.InvalidResponseErrorNGSI.NotFoundErrorNGSI.TooManyResultsError Class: InvalidRequestError new NGSI.InvalidRequestError() Error raised if the context broker server detected some problems with the data provided in the request. Extends Error × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-09-10T17:52:44+02:00 . "},"NGSI.InvalidResponseError.html":{"id":"NGSI.InvalidResponseError.html","title":"Class: InvalidResponseError","body":" Documentation Namespaces NGSI Classes NGSI.AlreadyExistsErrorNGSI.BadRequestErrorNGSI.ConnectionNGSI.ConnectionErrorNGSI.InvalidRequestErrorNGSI.InvalidResponseErrorNGSI.NotFoundErrorNGSI.TooManyResultsError Class: InvalidResponseError new NGSI.InvalidResponseError() Exception raised when the server returns an unexpected response. This usually means that the server doesn't conform to the FIWARE NGSI Specification or that the server doesn't use a version supported by this library. This also includes some error codes that can be returned by the server, but that are not expected when using the library. For example, a context broker server can return a UnsupportedMediaType error but the library always use application/json as Content-Type when sending data to the context broker. So, in case such error code is returned, ngsijs will raise this exception. Other errors handled by this exception: ContentLengthRequired. Extends Error × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-09-10T17:52:44+02:00 . "},"NGSI.NotFoundError.html":{"id":"NGSI.NotFoundError.html","title":"Class: NotFoundError","body":" Documentation Namespaces NGSI Classes NGSI.AlreadyExistsErrorNGSI.BadRequestErrorNGSI.ConnectionNGSI.ConnectionErrorNGSI.InvalidRequestErrorNGSI.InvalidResponseErrorNGSI.NotFoundErrorNGSI.TooManyResultsError Class: NotFoundError new NGSI.NotFoundError() Exception raised when requesting a missing resource (entity, attribute, type, subscription, ...) Extends Error × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-09-10T17:52:44+02:00 . "},"NGSI.TooManyResultsError.html":{"id":"NGSI.TooManyResultsError.html","title":"Class: TooManyResultsError","body":" Documentation Namespaces NGSI Classes NGSI.AlreadyExistsErrorNGSI.BadRequestErrorNGSI.ConnectionNGSI.ConnectionErrorNGSI.InvalidRequestErrorNGSI.InvalidResponseErrorNGSI.NotFoundErrorNGSI.TooManyResultsError Class: TooManyResultsError new NGSI.TooManyResultsError() Exception raised when making ambiguous query returning more than One entity. Extends Error × Search results Close Documentation generated by JSDoc 3.5.5 on 2018-09-10T17:52:44+02:00 . "}}
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            Searcher.init();
        });

        $(window).on("message", function(msg) {
            var msgData = msg.originalEvent.data;

            if (msgData.msgid != "docstrap.quicksearch.start") {
                return;
            }

            var results = Searcher.search(msgData.searchTerms);

            window.parent.postMessage({"results": results, "msgid": "docstrap.quicksearch.done"}, "*");
        });
    </script>
</body>
</html>
